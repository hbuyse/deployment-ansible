---
- name: "Clang | Install dependencies [{{ ansible_os_family }}]"
  become: true
  ansible.builtin.package:
    state: present
    name:
      - lsb-release
      - wget
      - software-properties-common
      - gnupg

- name: "Clang | Install source repository [{{ ansible_os_family }}]"
  become: true
  ansible.builtin.deb822_repository:
    name: "apt.llvm.org"
    types: deb
    uris: "http://apt.llvm.org/{{ ansible_distribution_release }}"
    suites: "llvm-toolchain-{{ ansible_distribution_release }}-{{ clang_llvm_stable_version }}"
    components: main
    state: present
    signed_by: "https://apt.llvm.org/llvm-snapshot.gpg.key"

- name: "Clang | Install LLVM packages in version {{ clang_llvm_stable_version }}"
  become: true
  ansible.builtin.package:
    update_cache: true
    state: present
    name:
      # LLVM
      - "libllvm{{ clang_llvm_stable_version }}"
      - "llvm-{{ clang_llvm_stable_version }}"
      - "llvm-{{ clang_llvm_stable_version }}-dev"
      - "llvm-{{ clang_llvm_stable_version }}-doc"
      - "llvm-{{ clang_llvm_stable_version }}-examples"
      - "llvm-{{ clang_llvm_stable_version }}-runtime"
      # Clang and co
      - "clang-{{ clang_llvm_stable_version }}"
      - "clang-tools-{{ clang_llvm_stable_version }}"
      - "clang-{{ clang_llvm_stable_version }}-doc"
      - "libclang-common-{{ clang_llvm_stable_version }}-dev"
      - "libclang-{{ clang_llvm_stable_version }}-dev"
      - "libclang1-{{ clang_llvm_stable_version }}"
      - "clang-format-{{ clang_llvm_stable_version }}"
      - "python3-clang-{{ clang_llvm_stable_version }}"
      - "clangd-{{ clang_llvm_stable_version }}"
      - "clang-tidy-{{ clang_llvm_stable_version }}"
      # compiler-rt
      - "libclang-rt-{{ clang_llvm_stable_version }}-dev"
      # lldb
      - "lldb-{{ clang_llvm_stable_version }}"
      # lld (linker)
      - "lld-{{ clang_llvm_stable_version }}"
      # libc++
      - "libc++-{{ clang_llvm_stable_version }}-dev"
      - "libc++abi-{{ clang_llvm_stable_version }}-dev"
